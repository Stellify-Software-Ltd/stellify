import{k as r,l as a,S as n}from"./_baseGetTag.37be2ff4.js";import{s as i}from"./App.10ca04be.js";import{s as d,a as h,d as p,b as l,g as c,c as f,e as m,f as u,h as g}from"./EmbedEditor.81b67f92.js";const b=r();a({data(){return{code:{},store:n()}},methods:{handleParentMessage(e){e.data.action?e.data.action=="deleteElement"?this.store.removeElement({slug:e.data.element}):e.data.action=="addElement"&&(this.store.createElement({slug:e.data.element,type:e.data.type,current:e.data.current}),this.store.insertElement({slug:e.data.element,current:e.data.current})):e.data.store=="content"?this.store.content[e.data.element]=e.data.attributes:e.data.store=="page"?this.store.page=e.data.attributes:this.store[e.data.store][e.data.property]=e.data.value}},async beforeMount(){this.store.page.cacheType=="browser"&&sessionStorage[this.store.page.slug]&&(this.store.content=JSON.parse(sessionStorage[this.store.page.slug])),typeof this.store.page.beforeMount<"u"&&this.store.page.beforeMount.length&&this.store.page.beforeMount.forEach(e=>{this.runMethod(e)})},mounted(){window.addEventListener("message",this.handleParentMessage),Object.keys(this.store.content).length>0&&this.store.page.cacheType=="browser"&&sessionStorage.setItem(this.store.page.slug,JSON.stringify(this.store.content)),Object.keys(window).forEach(t=>{typeof window[t]=="number"&&(this.store.variables[t]=window[t]),t=="navigation"&&Object.keys(Object.getPrototypeOf(window[t])).forEach(s=>{typeof window[t][s]=="boolean"&&(this.store.variables[s]=window[t][s])})}),window.addEventListener("resize",t=>{this.store.variables.innerHeight=t.innerHeight,this.store.variables.innerWidth=t.innerWidth}),window.addEventListener("scroll",t=>{this.store.variables.scrollX=t.scrollX,this.store.variables.scrollY=t.scrollX});const e=new IntersectionObserver((t,s)=>{t.forEach(o=>{o.intersectionRatio>0&&o.target.classList.add(this.store.content[o.target.id].enabledClasses),s.unobserve(o.target)})});[...document.querySelectorAll(".observe")].forEach(t=>e.observe(t)),typeof this.store.page.mounted<"u"&&this.store.page.mounted.length&&this.store.page.mounted.forEach(t=>{this.runMethod(t)})},beforeUnmount(){typeof this.store.page.beforeUnmount<"u"&&this.store.page.beforeUnmount.length&&this.store.page.beforeUnmount.forEach(e=>{this.runMethod(e)})},unmounted(){typeof this.store.page.unmounted<"u"&&this.store.page.unmounted.length&&this.store.page.unmounted.forEach(e=>{this.runMethod(e)})}}).use(b).component("s-app",i).component("s-wrapper",d).component("s-input",h).component("s-loop",p).component("s-svg",l).component("s-embed",c).component("s-shape",f).component("s-transition",m).component("s-form",u).component("s-freestyle",g).mount("#stellify");
